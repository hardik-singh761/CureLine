<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Hospital Triage System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                },
                fontFamily: {
                    sans: ["Inter", "system-ui", "sans-serif"],
                }
            },
        }
    };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: hsl(210 40% 96%);
            --foreground: hsl(210 11% 15%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(210 11% 15%);
            --primary: hsl(221 83% 53%);
            --primary-foreground: hsl(0 0% 98%);
            --secondary: hsl(158 64% 52%);
            --secondary-foreground: hsl(0 0% 98%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215 16% 47%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(210 11% 15%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(0 0% 98%);
            --border: hsl(214 32% 91%);
            --input: hsl(214 32% 91%);
            --ring: hsl(221 83% 53%);
            --radius: 8px;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, hsl(221 83% 53%) 0%, hsl(230 81% 60%) 100%);
        }
        
        .priority-1 { border-left: 4px solid hsl(0 84% 60%); }
        .priority-2 { border-left: 4px solid hsl(25 95% 53%); }
        .priority-3 { border-left: 4px solid hsl(48 96% 53%); }
        .priority-4 { border-left: 4px solid hsl(158 64% 52%); }
        .priority-5 { border-left: 4px solid hsl(210 40% 78%); }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body class="bg-background font-sans">
    <!-- @COMPONENT: Header -->
    <header class="gradient-bg text-primary-foreground shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">AI Triage System</h1>
                        <p class="text-sm opacity-90">Emergency Department Management</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm opacity-90">Current Time</p>
                    <p class="font-semibold" id="current-time">--:--:--</p>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <div class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- @COMPONENT: PatientIntakeForm -->
            <div class="bg-card rounded-lg shadow-lg border border-border">
                <div class="p-6 border-b border-border">
                    <h2 class="text-2xl font-bold text-card-foreground">Patient Intake</h2>
                    <p class="text-muted-foreground mt-1">Enter patient information for AI triage assessment</p>
                </div>
                
                <form class="p-6 space-y-6" id="triageForm">
                    <!-- Basic Information -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-card-foreground">Basic Information</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Patient Name</label>
                                <input type="text" name="patient_name" required 
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="Enter full name" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Age</label>
                                <input type="number" name="age" min="0" max="120" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="Enter age" data-mock="true">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Sex</label>
                                <select name="sex" required class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select sex</option>
                                    <option value="1">Female</option>
                                    <option value="2">Male</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Arrival Mode</label>
                                <select name="arrival_mode" required class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select arrival mode</option>
                                    <option value="1">Walking</option>
                                    <option value="2">Public Ambulance</option>
                                    <option value="3">Private Vehicle</option>
                                    <option value="4">Private Ambulance</option>
                                    <option value="5">Other (Air Transport)</option>
                                    <option value="6">Other (Transfer)</option>
                                    <option value="7">Other (Unknown)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Clinical Assessment -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-card-foreground">Clinical Assessment</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Injury Present</label>
                                <select name="injury" required class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select option</option>
                                    <option value="1">No</option>
                                    <option value="2">Yes</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Mental Status</label>
                                <select name="mental" required class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select mental status</option>
                                    <option value="1">Alert</option>
                                    <option value="2">Verbal Response</option>
                                    <option value="3">Pain Response</option>
                                    <option value="4">Unresponsive</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Pain Present</label>
                                <select name="pain" required class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select option</option>
                                    <option value="0">No</option>
                                    <option value="1">Yes</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">Pain Scale (NRS)</label>
                                <select name="nrs_pain" class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground">
                                    <option value="">Select pain level</option>
                                    <option value="0">0 - No Pain</option>
                                    <option value="1">1 - Minimal</option>
                                    <option value="2">2 - Mild</option>
                                    <option value="3">3 - Mild</option>
                                    <option value="4">4 - Moderate</option>
                                    <option value="5">5 - Moderate</option>
                                    <option value="6">6 - Moderate</option>
                                    <option value="7">7 - Severe</option>
                                    <option value="8">8 - Severe</option>
                                    <option value="9">9 - Severe</option>
                                    <option value="10">10 - Worst Possible</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Vital Signs -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-card-foreground">Vital Signs</h3>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">SBP (mmHg)</label>
                                <input type="number" name="sbp" min="40" max="300" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="120" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">DBP (mmHg)</label>
                                <input type="number" name="dbp" min="20" max="200" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="80" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">HR (bpm)</label>
                                <input type="number" name="hr" min="30" max="200" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="72" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">RR (/min)</label>
                                <input type="number" name="rr" min="5" max="50" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="16" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">BT (°C)</label>
                                <input type="number" name="bt" step="0.1" min="30" max="45" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="36.5" data-mock="true">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-card-foreground mb-2">O₂ Sat (%)</label>
                                <input type="number" name="saturation" min="70" max="100" required
                                       class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                       placeholder="98" data-mock="true">
                            </div>
                        </div>
                    </div>

                    <!-- Diagnosis -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-card-foreground">Clinical Information</h3>
                        
                        <div>
                            <label class="block text-sm font-medium text-card-foreground mb-2">Diagnosis in ED</label>
                            <textarea name="diagnosis" rows="3" required
                                      class="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"
                                      placeholder="Enter chief complaint, symptoms, and preliminary diagnosis..." data-mock="true"></textarea>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-3 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring">
                        <span class="flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span>Add to Triage Queue</span>
                        </span>
                    </button>
                </form>
            </div>
            <!-- @END_COMPONENT: PatientIntakeForm -->

            <!-- @COMPONENT: TriageQueue -->
            <div class="bg-card rounded-lg shadow-lg border border-border">
                <div class="p-6 border-b border-border">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold text-card-foreground">Triage Queue</h2>
                            <p class="text-muted-foreground mt-1">Real-time priority-based patient queue</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-muted-foreground">Patients Waiting</p>
                            <p class="text-2xl font-bold text-primary" id="queue-count">3</p>
                        </div>
                    </div>
                </div>

                <!-- Priority Legend -->
                <div class="p-4 bg-muted/50 border-b border-border">
                    <h4 class="text-sm font-semibold text-card-foreground mb-3">Priority Levels</h4>
                    <div class="grid grid-cols-5 gap-2 text-xs">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-destructive rounded-full"></div>
                            <span>Level 1 - Critical</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                            <span>Level 2 - Urgent</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                            <span>Level 3 - Semi-urgent</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-secondary rounded-full"></div>
                            <span>Level 4 - Standard</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-muted-foreground rounded-full"></div>
                            <span>Level 5 - Non-urgent</span>
                        </div>
                    </div>
                </div>

                <!-- Queue List -->
                <div class="p-6" id="queue-container">
                    <!-- Sample queue entries with mock data -->
                    <div class="space-y-4" id="queue-list">
                        
                        <!-- Mock Patient 1 - Critical -->
                        <div class="priority-1 bg-card border border-border rounded-lg p-4 shadow-sm pulse-animation" data-mock="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-destructive text-destructive-foreground rounded-full flex items-center justify-center font-bold text-sm">
                                        1
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-card-foreground">Sarah Johnson</h4>
                                        <p class="text-sm text-muted-foreground">Chest pain, unresponsive</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-medium text-destructive">CRITICAL</p>
                                    <p class="text-xs text-muted-foreground">2 min ago</p>
                                </div>
                            </div>
                            <div class="mt-3 grid grid-cols-4 gap-2 text-xs text-muted-foreground">
                                <span>Age: 45</span>
                                <span>BP: 180/110</span>
                                <span>HR: 120</span>
                                <span>O₂: 88%</span>
                            </div>
                        </div>

                        <!-- Mock Patient 2 - Urgent -->
                        <div class="priority-2 bg-card border border-border rounded-lg p-4 shadow-sm" data-mock="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold text-sm">
                                        2
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-card-foreground">Michael Chen</h4>
                                        <p class="text-sm text-muted-foreground">Severe abdominal pain</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-medium text-orange-600">URGENT</p>
                                    <p class="text-xs text-muted-foreground">5 min ago</p>
                                </div>
                            </div>
                            <div class="mt-3 grid grid-cols-4 gap-2 text-xs text-muted-foreground">
                                <span>Age: 32</span>
                                <span>BP: 140/90</span>
                                <span>HR: 95</span>
                                <span>O₂: 96%</span>
                            </div>
                        </div>

                        <!-- Mock Patient 3 - Standard -->
                        <div class="priority-4 bg-card border border-border rounded-lg p-4 shadow-sm" data-mock="true">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-secondary text-secondary-foreground rounded-full flex items-center justify-center font-bold text-sm">
                                        4
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-card-foreground">Emma Wilson</h4>
                                        <p class="text-sm text-muted-foreground">Minor laceration, alert</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-medium text-secondary">STANDARD</p>
                                    <p class="text-xs text-muted-foreground">12 min ago</p>
                                </div>
                            </div>
                            <div class="mt-3 grid grid-cols-4 gap-2 text-xs text-muted-foreground">
                                <span>Age: 28</span>
                                <span>BP: 120/80</span>
                                <span>HR: 72</span>
                                <span>O₂: 99%</span>
                            </div>
                        </div>

                    </div>

                    <!-- Empty State (hidden when queue has items) -->
                    <div class="text-center py-12 hidden" id="empty-queue">
                        <svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        <h3 class="text-lg font-semibold text-card-foreground">No Patients in Queue</h3>
                        <p class="text-muted-foreground">Add patients using the intake form to populate the triage queue.</p>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: TriageQueue -->

        </div>

        <!-- @COMPONENT: StatsPanel -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-6">
            <div class="bg-card rounded-lg shadow-lg border border-border p-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-destructive/10 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-destructive" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-card-foreground">1</p>
                        <p class="text-sm text-muted-foreground">Critical Cases</p>
                    </div>
                </div>
            </div>

            <div class="bg-card rounded-lg shadow-lg border border-border p-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-card-foreground">1</p>
                        <p class="text-sm text-muted-foreground">Urgent Cases</p>
                    </div>
                </div>
            </div>

            <div class="bg-card rounded-lg shadow-lg border border-border p-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-secondary/10 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-card-foreground">1</p>
                        <p class="text-sm text-muted-foreground">Standard Cases</p>
                    </div>
                </div>
            </div>

            <div class="bg-card rounded-lg shadow-lg border border-border p-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-2xl font-bold text-card-foreground">8.5</p>
                        <p class="text-sm text-muted-foreground">Avg Wait (min)</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: StatsPanel -->
    </div>

    <script>
        (function() {
            // Mock ML model prediction function
            function predictTriageLevel(patientData) {
                // TODO: Implement actual ML model integration
                // This is a simplified mock prediction based on vital signs and symptoms
                let score = 3; // Default to standard priority
                
                // Critical indicators
                if (patientData.mental == 4 || patientData.saturation < 90 || patientData.sbp > 180 || patientData.hr > 120) {
                    score = 1;
                } else if (patientData.mental == 3 || patientData.pain == 1 && patientData.nrs_pain >= 8) {
                    score = 2;
                } else if (patientData.injury == 2 || patientData.nrs_pain >= 5) {
                    score = 3;
                } else if (patientData.nrs_pain >= 2) {
                    score = 4;
                } else {
                    score = 5;
                }
                
                return score;
            }

            // Priority queue implementation
            class PriorityQueue {
                constructor() {
                    this.patients = [];
                }

                enqueue(patient) {
                    this.patients.push(patient);
                    this.patients.sort((a, b) => {
                        if (a.triageLevel !== b.triageLevel) {
                            return a.triageLevel - b.triageLevel; // Lower number = higher priority
                        }
                        return new Date(a.timestamp) - new Date(b.timestamp); // Earlier timestamp = higher priority
                    });
                }

                dequeue() {
                    return this.patients.shift();
                }

                getAll() {
                    return this.patients;
                }

                size() {
                    return this.patients.length;
                }
            }

            const triageQueue = new PriorityQueue();

            // Add mock patients to queue on load
            triageQueue.enqueue({
                id: 1,
                name: "Sarah Johnson",
                triageLevel: 1,
                symptoms: "Chest pain, unresponsive",
                vitals: { age: 45, bp: "180/110", hr: 120, o2: 88 },
                timestamp: new Date(Date.now() - 2 * 60 * 1000)
            });

            triageQueue.enqueue({
                id: 2,
                name: "Michael Chen",
                triageLevel: 2,
                symptoms: "Severe abdominal pain",
                vitals: { age: 32, bp: "140/90", hr: 95, o2: 96 },
                timestamp: new Date(Date.now() - 5 * 60 * 1000)
            });

            triageQueue.enqueue({
                id: 3,
                name: "Emma Wilson",
                triageLevel: 4,
                symptoms: "Minor laceration, alert",
                vitals: { age: 28, bp: "120/80", hr: 72, o2: 99 },
                timestamp: new Date(Date.now() - 12 * 60 * 1000)
            });

            // Update current time
            function updateTime() {
                const now = new Date();
                document.getElementById('current-time').textContent = now.toLocaleTimeString();
            }
            setInterval(updateTime, 1000);
            updateTime();

            // Render queue
            function renderQueue() {
                const queueList = document.getElementById('queue-list');
                const queueCount = document.getElementById('queue-count');
                const emptyQueue = document.getElementById('empty-queue');
                
                const patients = triageQueue.getAll();
                queueCount.textContent = patients.length;

                if (patients.length === 0) {
                    queueList.innerHTML = '';
                    emptyQueue.classList.remove('hidden');
                    return;
                }

                emptyQueue.classList.add('hidden');

                const priorityLabels = {
                    1: { label: 'CRITICAL', color: 'destructive', bgColor: 'bg-destructive' },
                    2: { label: 'URGENT', color: 'orange-600', bgColor: 'bg-orange-500' },
                    3: { label: 'SEMI-URGENT', color: 'yellow-600', bgColor: 'bg-yellow-500' },
                    4: { label: 'STANDARD', color: 'secondary', bgColor: 'bg-secondary' },
                    5: { label: 'NON-URGENT', color: 'muted-foreground', bgColor: 'bg-muted-foreground' }
                };

                queueList.innerHTML = patients.map(patient => {
                    const priority = priorityLabels[patient.triageLevel];
                    const timeAgo = Math.floor((Date.now() - patient.timestamp) / (1000 * 60));
                    const pulseClass = patient.triageLevel === 1 ? 'pulse-animation' : '';
                    
                    return `
                        <div class="priority-${patient.triageLevel} bg-card border border-border rounded-lg p-4 shadow-sm ${pulseClass}">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 ${priority.bgColor} text-white rounded-full flex items-center justify-center font-bold text-sm">
                                        ${patient.triageLevel}
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-card-foreground">${patient.name}</h4>
                                        <p class="text-sm text-muted-foreground">${patient.symptoms}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-medium text-${priority.color}">${priority.label}</p>
                                    <p class="text-xs text-muted-foreground">${timeAgo} min ago</p>
                                </div>
                            </div>
                            <div class="mt-3 grid grid-cols-4 gap-2 text-xs text-muted-foreground">
                                <span>Age: ${patient.vitals.age}</span>
                                <span>BP: ${patient.vitals.bp}</span>
                                <span>HR: ${patient.vitals.hr}</span>
                                <span>O₂: ${patient.vitals.o2}%</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Form submission
            document.getElementById('triageForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(e.target);
                const patientData = {};
                
                // Collect form data
                for (let [key, value] of formData.entries()) {
                    if (key === 'patient_name' || key === 'diagnosis') {
                        patientData[key] = value;
                    } else {
                        patientData[key] = parseFloat(value) || value;
                    }
                }

                // Predict triage level using mock ML model
                const triageLevel = predictTriageLevel(patientData);
                
                // Create patient object
                const newPatient = {
                    id: Date.now(),
                    name: patientData.patient_name,
                    triageLevel: triageLevel,
                    symptoms: patientData.diagnosis,
                    vitals: {
                        age: patientData.age,
                        bp: `${patientData.sbp}/${patientData.dbp}`,
                        hr: patientData.hr,
                        o2: patientData.saturation
                    },
                    timestamp: new Date()
                };

                // Add to queue
                triageQueue.enqueue(newPatient);
                
                // Update display
                renderQueue();
                
                // Reset form
                e.target.reset();
                
                // Show success message (you could add a toast notification here)
                alert(`Patient ${newPatient.name} added to queue with Priority Level ${triageLevel}`);
            });

            // Initial render
            renderQueue();
        })();
    </script>
</body>
</html>